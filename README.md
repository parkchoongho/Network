# Network

## 1. Ip와 도메인

### IP 주소 (Internet Protocol Address)

Protocol은 약속을 뜻합니다. 인터넷 같은 거대한 시스템이 동작하기 위해서는 약속된 체계가 필요했고 이러한 필요에 의해 생긴것이 바로 **Internet Protocol**입니다. 또한, 인터넷에 연결된 컴퓨터들이 서로 정보를 주고 받기 위해서는 각자 고유한 식별 주소를 가지고 있어야 했습니다. 그 주소를 바로 **IP 주소** 라고 합니다.

그런데 **IP 주소**는 큰 단점을 가지고 있습니다. 그건 바로 기억하기 힘들다는 점입니다. 우리가 전화할 때, 전화번호를 다 기억해서 전화하지 않고 이름을 검색해 전화하듯, 인터넷도 같은 방식의 통신 방법이 존재합니다. 인터넷은 **도메인 네임**을 바탕으로 통신합니다. 도메인 네임을 입력하면 그 도메인 네임에 해당하는 IP 주소로 접속하게 되는 것입니다.

ex) naver.com => 202.131.30.12, google.com => 216.58.220.174

컴퓨터는 도메인을 통해서 서버에 접속할 수 없습니다. (도메인은 사람의 편의에 의해 만들어 놓은 것이기 때문입니다.) 서버에 접속하기 위해서는 반드시 IP주소를 통해서만 가능합니다.

> **그렇다면 어떻게 도메인 네임을 브라우저에 입력하면 해당 서버에 접속이 가능한걸까요?**

그건 바로 **Domain Name System**(이하 DNS)이 이를 가능하게 해주기 때문입니다.

### DNS (Domain Name System)

**Domain Name System**은 다음과 같이 동작합니다. 클라이언트에서 도메인 네임을 입력하면 Domain Name Server에 접속합니다. 클라이언트 컴퓨터는 **Domain Name Server**의 IP 주소를 알고 있기 때문에 Name Server에 접속해서 클라이언트가 모르는 해당 도메인 네임의 IP 주소를 요청합니다. Name Server는 도메인 네임과 연결되어 있는 IP 주소를 가지고 있고 해당 IP 주소를 클라이언트에게 전송합니다. 그러면 클라이언트는 그 IP 주소를 토대로 서버에 접속할 수 있습니다.

**Tip**: 도메인을 사용하고 싶으면 도메인을 구입해서 Name Server에 등록해야 한다.

<br>

## 2. IPv6

### IPv6

웹 사이트를 만들고 IP를 할당할 때 **공인 IP**의 경우에는 성공하고 **사설 IP**의 경우에는 실패합니다. 여기서 공인 IP는 무엇이고 사설 IP는 무엇일까요?

그 전에 IP 주소 전체 갯수는 몇개일지 생각해봅시다.

IP 주소 체계는 **0.0.0.0 ~ 255.255.255.255** 로 이루어져 있습니다. 따라서 총 갯수는 약 42억개입니다. 그런데 이미 2011년도에 42억개의 IP 주소를 모두 할당해버려 IP 주소를 더 이상 줄 수 없는 상황이 도래합니다. 이런 IP 주소가 부족한 문제를 해결하려는 여러 움직임이 있었는데 그 중 하나가 바로 **IPv6**입니다.

**IPv6**는 새로운 주소 체계입니다.

> **IPv4**: 220.109.62.43
> **IPv6**: 2001:0db8:85a3:08d3:1319:8a2e:0370:7334

**IPv6**는 더 복잡하고 훨씬 더 많은 주소를 만들어낼 수 있다.

그런데 이미 **기존 IP 주소 체계**를 사용하고 있는 기계들이 존재하기에, 현재는 **IPv4**와 **IPv6**가 동시에 존재하는 과도기적 상태입니다.

<br>

## 3. Port

### 사설 IP와 공인 IP

위에 나온 IPv6외에도 IP 주소 부족 문제를 해결하는 방법이 있는데, 그것이 바로 **사설 IP**와 **공인 IP**입니다.

앞서 우리가 웹 사이트에 접속을 실패한 이유는 **공유기** 때문일 가능성이 높습니다. 여기서 **공유기**란 무엇일까요?

만약 집에 컴퓨터가 3대 있다고 가정해봅시다. 각각의 컴퓨터마다 회선을 하나씩 연결하고 IP 주소를 할당받아 작업을 한다면 아까 작성한 웹사이트 접속에 성공했을 것입니다. 하지만 이 방법을 사용할 시, 많은 비용이 발생하게 됩니다. 왜냐하면 각 회선마다 비용이 발생하기 때문입니다.

따라서 이러한 비용 문제를 해결하기 위해서 **공유기**를 사용합니다. 하나의 통신사 회선을 공유기에 연결하고 각각의 컴퓨터를 공유기에 연결하는 방식입니다. (집에서 컴퓨터는 회선으로 노트북은 무선 안테나를 통해 같은 공유기를 쓰는 것과 같은 원리 => 이렇게 무선으로 통신하는 방식을 WIFI라고 합니다.) 연결된 컴퓨터들과 공유기는 IP 주소를 갖습니다.

> 컴퓨터 IP 주소를 알려주는 사이트: https://whatismyipaddress.com

[https://whatismyipaddress.com](https://whatismyipaddress.com/)에 나오는 IP는 내 컴퓨터 고유 주소가 아닌 **공유기 IP 주소**일 가능성이 높습니다. 따라서 사용자들은 **공유기**까지만 도달하고 자신의 컴퓨터에는 도달을 못하니, 자신이 만든 웹사이트에 접속하지 못했던 것입니다. 여기서 공유기의 IP 주소가 바로 **공인 IP**이고 각 컴퓨터의 IP 주소가 **사설 IP**입니다.

그렇다면 **사설 IP**에 해당하는 내 컴퓨터에 접속하기 위해서는 어떻게 해야 할까요?

<br>

## 4. Port Fowarding

**포트 포워딩** 방식을 사용하면 공유기에 연결되어 있는 사설 IP에 접속할 수 있습니다. **포트 포워딩**은 공유기가 사설 IP 주소로 사용자를 보내는 방식입니다. 포트 포워딩을 이해하기 위해서 먼저 **포트**가 무엇인지를 알아봅시다.

### Port

**포트**는 영어로 항구라는 뜻입니다. 비유를 하자면 항구가 배가 정박할 수 있듯이, **포트** 또한 사용자가 접속을 해서 그 곳에 정박할 수 있는 것이라 생각하면 좋습니다.

어떤 사이트에 접속할 때, http://222.109.62.43이라 입력하고 엔터를 치면 **http**는 사라지고 IP 주소만 남게 됩니다. 왜냐하면 웹 브라우저를 통해 서버에 접속한다는 것은 기본적으로 **HTTP(Hyper Text Transfer Protocol)** 라고 하는 통신 규약을 사용하는 것이 분명하기에 브라우저는 이를 생략합니다. (모든 웹 브라우저가 그런 것은 아닙니다. 대부분이 그렇지만.) 따라서 웹 브라우저에서는 http를 붙이나 안 붙이나 같은 것으로 인식하고 작업을 수행합니다.

같은 윈리로 http://222.109.62.43:80 이라 입력하고 엔터를 치면 **:80** 또한 사라집니다. 이 또한 **:80**을 없애는 것이 아닌 있다고 간주하고 웹 브라우저가 일을 진행하는 것인데요. 여기서 **:80**이 의미하는 것은 80번 포트를 쓰겠다는 의미입니다. 여기서 80에 다른 숫자를 입력하고 접속을 시도하게 되면 해당 웹 페이지를 찾을 수 없다는 에러가 뜨게됩니다.

인터넷에 연결된 컴퓨터에는 약 6만 5천개의 문이 존재하고 이 각각의 문을 **포트**라 부릅니다. 각각의 문들은 자신만의 고유한 번호를 가지고 있습니다. 그 중 **80번 포트**라고 이름 붙힌 문으로 접속을 시도하면 그 안에는 **웹 서버**가 설치되어 있습니다.

처음으로 돌아가 http://222.109.62.43:80에 접속하는 원리를 다시 생각해봅시다. http://222.109.62.43:80를 입력하고 엔터를 치면 http로 222.209.62.43 IP 주소를 가진 컴퓨터에 접속을 시도하게 되고, 그 중 80번 포트로 접속하게 됩니다. 그리고 기본적으로 컴퓨터의 웹 서버는 80번 포트에 설치되어 있기 때문에 우리는 웹 서버에 요청을 할 수 있게 됩니다.

**다른 포트 예시**

```powershell
user@DESKTOP-P2A3NBM MINGW64 ~
$ mysql -uroot -p -h 222.109.62.43 -P 3306
```

위 Command Line은 MySQL 클라이언트인 MySQL Monitor를 통해 서버에 접속할 때 사용하는 명령어입니다. `-h` 는 host를 의미하고 그 다음은 해당 IP 주소를 가진 서버로 접속한다는 의미입니다. `-P 3306`은 해당 서버의 3306번 포트로 접속한다는 뜻입니다. (3306번 포트에 MySQL이 설치되어 있다는 의미)

**포트**에 대한 이해가 완료되었다면 그러면 대체 **포트 포워딩**은 무엇일까요?

이메일애는 포워딩 기능이 있는데, 누군가가 나에게 보낸 이메일을 다른 사람에게 그대로 전달하는 기능입니다.

### Port Fowarding

현재 공유기의 IP가 222.109.62.43이고 공유기에 연결된 192.168.0.2 컴퓨터의 80번 포트에 있는 웹 서버에 접속하고 싶다고 가정해봅시다.

공유기 관리자에 들어가 http://222.109.62.43:80 에 접속하면 (공유기에 접근을 하면) http://192.168.0.2:80 로 향하게끔 **포트 포워딩** 설정을 해놓으면, 공유기는 그 설정에 맞게 동작합니다.

<br>

## 5. 절대경로, 상대경로

### 절대경로

절대경로란, 서울시 서울동 서울 아파트 302호가 전세계 어디에서든 그 집을 가리키는 것 처럼 위치와 상관없이 동일한 경로를 의미합니다.

=> 나의 위치와 무관하게 위치를 가리키고 싶을 때 절대경로를 사용합니다.

### 상대경로

상대경로란, 옆집을 우리가 우리집 옆집이라 칭하는 것처럼 내 현재 위치에 기반해서 표현하는 경로입니다.

=> 나의 위치에 따라 달라지는 경로를 표현할 때 상대경로를 사용합니다.

**Tip**: 경로에서 `'/'` 는 웹 경로상에서 가장 최상위 디렉토리를 의미합니다. 같은 주소안에서는 절대 경로이지만 주소가 바뀌거나 서버가 바뀌면 상대경로처럼 작동합니다.

ex) `'/index.php'` 는 최상위 디렉토리의 index.php 파일에 접근한다는 의미입니다.

`/` 를 안 붙히고 바로 입력하는 것은 현재 디렉토리를 뜻합니다.

ex) `'uploads/videos'`

따라서 동일한 사이트에 있는 다른 경로로 이동하는 링크를 만드는 경우에는 **상대경로**를 사용합니다. 그런데 현재 사이트와 무관한 링크를 생성하거나 리소스를 가져오려면 **절대경로**를 사용합니다.

<br>

## 6. 유동IP와 DDNS

### Dynamic Address

유동 IP는 IP 주소가 계속 변합니다. 예를 들어, 현재 우리집 IP 주소가 198.78.108.86이라고 해봅시다. 그런데 우리 집이 한동안 집을 비우게 되어 공유기를 오랫동안 사용하지 않게 되면, 통신사가 우리 집에 부여한 IP 주소를 회수합니다. 그 다음, 새로 통신사에 가입한 집에 그 IP 주소(198.78.108.86)를 부여하고 우리 집이 다시 돌아와 인터넷을 사용하면 다른 IP 주소를 부여합니다. 이러한 이유로 인해, 가정에서 서버를 운영하는 것은 예기치 못한 결과를 초래할 수 있습니다.(IP 주소가 계속 바뀌기 때문에)

**Tip:** 서버를 운영하는 전용 서비스들의 경우에는 고정된 IP를 제공합니다.

이러한 유동IP로 인해 여러가지 문제점이 발생합니다. 내가 oo2.org라는 도메인에 접속한다고 해봅시다. 그러면 내 컴퓨터는 Name Server로 가서 oo2.org에 해당하는 IP 값을 가져옵니다. 그리고 IP 주소를 바탕으로 접속을 시도하는데 유동 IP로 인해 oo2.org의 IP 주소가 바뀐 경우에는 에러가 발생하거나 전혀 다른 결과가 브라우저에 나타날 것입니다. 해당 도메인의 IP가 바뀌었지만 Name Server에는 이게 반영이 되지않아 이런 참사가 발생했습니다. 이러한 경우에는 어떻게 해야할까요?

### DDNS (Dynamic DNS)

위의 문제점을 해결하기 위해 나온것이 바로 DDNS이다. 위의 상황에서 원래의 IP 주소가 154.67.87.83이라고 하고 유동 IP로 인해 IP 주소가 154.67.87.84로 바뀌었다고 해봅시다. 이 경우 바뀐 IP 주소를 Name Server에 알려주어 해당 도메인 IP 주소를 주기적으로 업데이트 한다면 문제점은 해결됩니다. 이렇게 도메인과 호스트의 IP 주소를 지속적으로 일치화 즉, 동기화 시켜주는 DNS를 DDNS라고 합니다.
