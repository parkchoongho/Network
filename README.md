# Network

## 1. Ip와 도메인

### IP 주소 (Internet Protocol Address)

Protocol은 약속을 의미한다. 인터넷과 같은 거대한 체계가 움직이기 위해서는 약속된 체계가 필요한데 그것이 바로 **Internet Protocol**이다. 인터넷에 연결되어 있는 컴퓨터들이 서로 정보를 주고 받기 위해서는 고유한 식별 주소를 가지고 있어야 하는데 그 주소를 바로 **IP 주소** 라고 한다.

이러한 **IP 주소**는 큰 단점을 가지고 있다. 바로 기억하기 힘들다는 점이다. 우리가 전화할 때, 전화번호를 다 기억해서 전화하지 않고 이름을 검색해 전화하듯이, 인터넷도 같은 방식의 통신 방법이 존재한다. 인터넷은 **도메인 네임**을 바탕으로 통신한다. 도메인 네임을 입력하면 그 도메인 네임에 해당하는 IP 주소로 접속하게 되는 것이다. 

ex) naver.com => 202.131.30.12, google.com => 216.58.220.174

컴퓨터는 도메인을 통해서 서버에 접속할 수 없다. (도메인은 사람들이 보기 쉽게 만들어 놓은 것.) 서버에 접속하기 위해서는 반드시 IP주소를 통해서만 가능하다. 

**그런데 어떻게 도메인 네임을 브라우저에 입력했는데 해당 서버에 접속이 가능한걸까?**

그건 바로 **Domain Name System**(이하 DNS)이 이를 가능하게 해주기 때문이다.

### DNS (Domain Name System)

**Domain Name System**이 동작하는 방식은 다음과 같다. 클라이언트 상에서 도메인 네임을 입력하면 Domain Name Server에 접속한다. 클라이언트 컴퓨터는 **Domain Name Server**의 IP 주소를 알고 있기 때문에 Name Server에 접속해서 클라이언트가 모르는 해당 도메인 네임의 IP 주소를 물어본다. Name Server는 도메인 네임과 연결되어 있는 IP 주소를 담고 있고 해당 IP 주소를 클라이언트에게 알려준다. 그러면 이제 클라이언트는 그 IP 주소를 토대로 서버에 접속할 수 있게 된다.

**Tip**: 도메인을 사용하고 싶으면 도메인을 구입해서 Name Server에 등록해야 한다.

<br>

## 2. IPv6

### IPv6

웹 사이트를 만들고 IP를 할당할 때 **공인 IP**의 경우에는 성공하고 **사설 IP**의 경우에는 실패한다. 여기서 공인 IP는 무엇이고 사설 IP는 무엇일까?

그 전에 IP 주소 전체 갯수는 몇개일지 생각해보자.

IP 주소 체계는  **0.0.0.0 ~ 255.255.255.255** 로 구성되어 있다. 따라서 총 갯수는 약 42억개이다. 즉 IP 주소로 총 42억개를 만들 수 있는 것이다. 그런데 이미 2011년도에 42억개의 IP 주소를 모두 할당해버려 IP 주소를 더 이상 줄 수 없는 상황에 도래하게 된다.

아까 서버에 접속할 수 없었던 이유를 IP 주소가 부족한 상황에 입각해 생각해보자. IP 주소가 부족한 문제를 해결하려는 여러 해결책이 있는데 그 중에 하나가 바로 **IPv6**이다.

**IPv6**는 새로운 주소 체계이다.

**IPv4**: 220.109.62.43

**IPv6**: 2001:0db8:85a3:08d3:1319:8a2e:0370:7334

**IPv6**는 더 복잡하고 훨씬 더 많은 주소를 만들어낼 수 있다.

그런데 기존의 **IP 주소** 체계를 사용하고 있는 기계들이 존재하기 때문에, 현재는 **IPv4**와 **IPv6**를 동시에 사용하고 있는 과도기적 상태이다.

<br>

## 3. Port

### 사설 IP와 공인 IP

위에서 밝힌 IPv6말고도 IP 주소 부족 문제를 해결하는 방법이 있는데, 그것이 바로 **사설 IP**와 **공인 IP**이다. 앞서 우리가 만든 웹 사이트에 접속을 실패한 이유는 **공유기** 때문일 가능성이 높다. 여기서 **공유기**란 무엇일까?

만약 집에 컴퓨터가 3대 있다고 가정해보자. 이 각각의 컴퓨터마다 회선을 하나씩 연결하여 IP 주소를 할당받아 작업을 하면 아까 만든 웹사이트 접속에 성공했을 것이다. 그런데 이렇게 하면, 많은 비용이 발생하게 된다. 왜냐하면, 각가의 회선마다 비용이 책정되기 때문이다.

따라서 이러한 비용적 측면에서의 문제점을 해결하기 위해서 **공유기**를 사용한다. 하나의 통신사 회선을 공유기에 연결하고 각각의 컴퓨터를 공유기에 연결하는 방식이다. (집에서 컴퓨터는 회선으로 노트북은 무선 안테나를 통해 같은 공유기를 쓰는 것과 같은 원리 => 이렇게 무선으로 통신하는 방식을 WIFI라고 한다.) 연결된 컴퓨터들은 IP 주소를 갖게되며, 공유기도 IP 주소를 갖는다. 

컴퓨터의 IP 주소를 알려주는 사이트 

[https://whatismyipaddress.com](https://whatismyipaddress.com/)에 나오는 IP는 내 컴퓨터 고유 주소가 아닌 **공유기의 IP 주소**일 가능성이 높다. 따라서 사용자들은 **공유기**까지만 도달하고 자신의 컴퓨터에는 도달을 못하니, 자신이 만든 웹사이트에 접속하지 못했던 것이다. 여기서 공유기의 IP 주소가 바로 **공인 IP**이고 각 컴퓨터의 IP 주소가 **사설 IP**이다.

그렇다면 **사설 IP**에 해당하는 내 컴퓨터에 접속하기 위해서는 어떻게 해야 할까?

<br>

## 4. Port Fowarding

**포트 포워딩** 방식을 사용하면 공유기에 연결되어 있는 사설 IP에 접속할 수 있다. **포트 포워딩**은 공유기가 사설 IP 주소로 사용자를 보내는 방법이다. 포트 포워딩을 이해하기 위해서 먼저 **포트**가 무엇인지를 알아보자.

### Port

**포트**는 영어로 항구라는 뜻이다. 비유를 하자면 항구가 배가 정박할 수 있듯이, **포트** 또한 사용자가 접속을 해서 그 곳에 정박할 수 있는 것이라 생각하면 좋다. 

어떤 사이트에 접속을 할 때, http://222.109.62.43이라 입력하고 엔터를 치면 **http**는 사라지고 IP 주소만 남는다. 왜냐하면 웹 브라우저를 통해서 서버에 접속한다는 것은 기본적으로 **HTTP(Hyper Text Transfer Protocol)** 라고 하는 통신 규약을 사용하는 것이 분명하기 때문에 브라우저가 이를 생략한다. (모든 웹 브라우저가 그런 것은 아니다. 대부분이 그렇다는 것.) 따라서 웹 브라우저에서는 http를 붙이나 안 붙이나 같은 것으로 인식하고 작업을 수행한다.

같은 윈리로 http://222.109.62.43:80 이라 입력하고 엔터를 치면 **:80** 또한 사라진다. 이 또한 **:80**을 없애는 것이 아닌 있다고 간주하고 웹 브라우저가 일을 진행하는 것이다. 여기서 **:80**이 의미하는 것은 80번 포트를 쓰겠다는 의미이다. 여기서 80에 다른 숫자를 입력하고 접속을 시도하게 되면 해당 웹 페이지를 찾을 수 없다는 에러가 뜨게된다.

인터넷에 연결된 컴퓨터 안에는 약 6만 5천개의 문이 존재하고 이 각각의 문을 **포트**라 명한다. 각각의 문들은 자신만의 고유한 번호를 가지고 있다. 그 중 **80번 포트**라고 이름 붙힌 문으로 접속을 시도하면 그 안에는 바로 **웹 서버**가 설치되어 있다.

처음으로 돌아가 http://222.109.62.43:80에 접속하는 원리를 다시 생각해보자. http://222.109.62.43:80를 입력하고 엔터를 치면 http로 222.209.62.43 IP 주소를 가진 컴퓨터에 접속을 시도하게 되고, 그 중 80번 포트로 접속하게 되는 것이다. 여기서 기본적으로 컴퓨터의 웹 서버는 80번 포트에 설치되어 있기 때문에 우리는 웹 서버에 요청을 할 수 있게 된다.

**다른 포트 예시**

```powershell
user@DESKTOP-P2A3NBM MINGW64 ~
$ mysql -uroot -p -h222.109.62.43 -P3306
```

위 Command Line은 MySQL 클라이언트인 MySQL Monitor를 통해 서버에 접속할 때 사용하는 명령어이다. `-h` 는 host를 의미하고 그 다음은 해당 IP 주소를 가진 서버로 접속한다는 의미다. `-P3306`은 해당 서버의 3306번 포트로 접속한다는 뜻이다. (3306번 포트에 MySQL이 설치되어 있다는 의미)

**포트**에 대한 이해가 완료되었는데 그러면 대체 **포트 포워딩**은 무엇일까? 

이메일을 사용하면 포워딩 기능이 있는데, 누군가가 나에게 보낸 이메일을 다른 사람에게 그대로 전달하는 기능이다. 

### Port Fowarding

해당 공유기의 IP가 222.109.62.43이라고 가정해보자. 그리고 지금 이 공유기에 연결되어 있는 192.168.0.2의 80번 포트에 해당하는 웹 서버에 접속하고 싶다.  

공유기 관리자에 들어가 http://222.109.62.43:80 에 접속하면 (공유기에 접근을 하면) http://192.168.0.2:80 로 향하게끔 **포트 포워딩** 설정을 해놓으면, 공유기는 그 설정에 맞게 동작하게 된다.

<br>

## 5. 절대경로, 상대경로

### 절대경로

절대경로란, 서울시 서울동 서울 아파트 302호가 전세계 어디에서건 그 집을 가리키는 것 처럼 어디에 있던간에 그 경로를 의미한다.

=> 나의 위치와 무관하게 위치를 가리키고 싶을 때 절대경로를 사용한다.

### 상대경로

상대경로란, 옆집을 우리가 우리집 옆집이라 말한 것처럼 내 현재 위치에 기반해서 말하는 경로를 의미한다.

=> 나의 위치에 따라 달라지는 경로를 표현할 때 상대경로를 사용한다.

**Tip**: 경로에서 `'/'` 는 웹 경로상에서 가장 최상위 디렉토리를 의미한다. 같은 주소안에서는 절대 경로이지만 주소가 바뀌거나 서버가 바뀌면 상대경로처럼 작동한다.

ex) `'/index.php'` 는 최상위 디렉토리의 index.php 파일에 접근한다는 의미이다. 

`/` 를 안 붙히고 바로 입력하는 것은 현재 디렉토리를 의미한다. 

ex) `'uploads/videos'` 

따라서 동일한 사이트에 있는 다른 경로로 이동하는 링크를 만드는 경우에는 **상대경로**를 사용한다. 그런데 현재 사이트와 상관없는 곳으로 링크를 만들거나 이미지등을 가져오려면 **절대경로**를 사용한다.